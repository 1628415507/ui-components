<!--
 * @Description: 
 * @Date: 2024-11-04 13:18:05
 * @LastEditTime: 2024-11-04 13:36:21
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>tab2-BroadcastChannel</title>
    <style></style>
  </head>

  <body>
    <div>tab2</div>
    <div id="msg"></div>
    <script>
      self.addEventListener('load', () => {
        const channel = new BroadcastChannel('visitor-channel')

        // 监听消息来更新用户数量
        channel.addEventListener('message', function (event) {
          if (event.data.startsWith('tab1')) {
            // 用接收到的用户数量更新显示
            updateVisitorCountDisplay(event.data)
          }
        })

        // 这个方法将设置标签页上的用户计数显示
        function updateVisitorCountDisplay(message) {
          // 这里写用于更新显示的代码
          const msg = document.getElementById('msg')
          msg.textContent = message
        }
      })
    </script>
  </body>
</html>
