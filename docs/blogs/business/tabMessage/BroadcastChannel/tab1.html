<!--
 * @Description: 
 * @Date: 2024-11-04 13:18:05
 * @LastEditTime: 2024-11-04 13:41:06
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>BroadcastChannel</title>
    <style></style>
  </head>

  <body>
    <div>tab1</div>
    <script>
      self.addEventListener('load', () => {
        const channel = new BroadcastChannel('visitor-channel')
        let visitorCount = 0
        // 定时发送随机的用户活动消息给tab2
        setInterval(function () {
          visitorCount++
          channel.postMessage(`tab1的用户信息: ${visitorCount}`)
        }, 3000)
      })
    </script>
  </body>
</html>
