## 【V8 ⾥⾯的 JIT 是什么？】

在计算机科学中，JIT 是“`Just-In-Time`”（即时编译）的缩写，它是⼀种提⾼代码执⾏性能的技术。
具体来说，在 V8 引擎（Google Chrome 浏览器和 Node.js 的 JavaScript 引擎）中，JIT 编译器在
JavaScript 代码运⾏时，将其编译成**机器语⾔**，以提⾼执⾏速度。

- 这⾥简要解释下 JIT 编译器的⼯作原理：
  1. 解释执⾏：V8 ⾸先通过⼀个解释器（如 Ignition）来执⾏ JavaScript 代码。这个过程中，代码不
     会编译成机器语⾔，⽽是**逐⾏解释执⾏**。这样做的优点是启动快，但执⾏速度较慢。
  2. 即时编译：当代码被 **多次执⾏** 时，V8 会认为这部分代码是“热点代码”（`Hot Spot`），此时 JIT 编
     译器（如 TurboFan）会介⼊，将这部分热点代码编译成机器语⾔。机器语⾔运⾏在 CPU 上⽐解释
     执⾏要快得多。
  3. 优化与去优化：JIT 编译器会对**热点代码**进⾏优化，但有时候它会基于错误的假设做出优化（例如
     认为某个变量总是某种类型）。如果后来的执⾏发现这些假设不成⽴，编译器需要去掉优化
     （Deoptimize），重新编译。
- JIT 编译器的⼀个关键优点是它能够在不牺牲启动速度的情况下，提供接近于或同等于编译语⾔的运⾏
  速度。这使得像 JavaScript 这样原本被认为执⾏效率较低的语⾔能够⽤于复杂的计算任务和⾼性能的
  应⽤场景。
- 随着 V8 和其他现代 JavaScript 引擎的不断进步，JIT 编译技术也在持续优化，以提供更快的执⾏速度
  和更⾼的性能。

## 【如何减少 JS 加载对浏览器渲染过程的阻塞】

### JS 的加载会阻塞浏览器渲染吗？

- JavaScript 的加载、解析和执⾏默认情况下会阻塞浏览器的渲染过程。
- 这是因为浏览器渲染引擎和 JavaScript 引擎是**单线程**的，并且 **⼆者共享同⼀个线程**。**JavaScript 在执⾏时会阻⽌ DOM 构建**，因为 JavaScript 可能会修改 DOM 结构（例如添加、修改或删除节点）。出于这个原因，**浏览器必须暂停 DOM 的解析和渲染，直到 JavaScript 执⾏完成**。
- 默认情况下，当浏览器遇到⼀个 `<script`> 标签时，会⽴即停⽌解析 HTML，转⽽下载和执⾏脚本，然后再继续 HTML 的解析和渲染。这意味着在 HTML ⽂档中的 JavaScript 脚本的下载和执⾏过程中，⻚⾯的渲染是被阻塞的。

### 如何减少 JS 加载对浏览器渲染过程的阻塞：

- 异步脚本（async）
- 延迟脚本（defer）
- 移动脚本位置  
   将脚本放在 HTML 的底部，即`<body>` 标签关闭之前，⽽不是放在 `<head>` 中，可以让⻚⾯内容
  先加载显⽰，从⽽减少⽤⼾对加载过程的可感知时间。
- 动态脚本加载  
  可以使⽤ JavaScript 动态创建 `<script>` 元素并添加到 DOM 中，从而控制脚本的加载和
  执⾏时机。

```js
const script = document.createElement('script')
script.src = 'script.js'
document.body.appendChild(script)
```

现代 Web 开发中通常推荐使⽤ `async` 或 `defer` 属性，提⾼⻚⾯加载性能，尤其是对于那些需要从外部服务器加载的⼤型 JavaScript 库来说尤为关键。
